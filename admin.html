<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理後台</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>管理後台</h2>
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" id="products-tab" href="#">商品管理</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="orders-tab" href="#">訂單紀錄</a>
            </li>
        </ul>
        <div id="content" class="mt-4">
            <!-- 內容將由 JavaScript 動態切換 -->
        </div>
    </div>
    <script>
        // 切換標籤
        const contentDiv = document.getElementById("content");

        document.getElementById("products-tab").addEventListener("click", async () => {
            contentDiv.innerHTML = `<h3>商品管理</h3>`;
            const response = await fetch("/api/admin/products");
            const products = await response.json();

            contentDiv.innerHTML += `
                <button class="btn btn-success mb-3" onclick="addProduct()">新增商品</button>
                <table class="table">
                    <thead>
                        <tr>
                            <th>商品名稱</th>
                            <th>價格</th>
                            <th>庫存</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${products.map(product => `
                            <tr>
                                <td>${product.Name}</td>
                                <td>${product.Price}</td>
                                <td>${product.Stock}</td>
                                <td>
                                    <button class="btn btn-primary" onclick="editProduct(${product.ProductID})">修改</button>
                                    <button class="btn btn-danger" onclick="deleteProduct(${product.ProductID})">刪除</button>
                                </td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
            `;
        });

        document.getElementById("orders-tab").addEventListener("click", async () => {
            contentDiv.innerHTML = `<h3>訂單紀錄</h3>`;
            const response = await fetch("/api/admin/orders");
            const orders = await response.json();

            contentDiv.innerHTML += `
                <table class="table">
                    <thead>
                        <tr>
                            <th>訂單編號</th>
                            <th>顧客名稱</th>
                            <th>日期</th>
                            <th>總金額</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${orders.map(order => `
                            <tr>
                                <td>${order.OrderID}</td>
                                <td>${order.CustomerName}</td>
                                <td>${new Date(order.OrderDate).toLocaleDateString()}</td>
                                <td>${order.TotalAmount}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
            `;
        });

        // 預設載入商品管理
        document.getElementById("products-tab").click();
    </script>
</body>
</html>
